{% extends "layout.html" %}
{% block styles %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}" />
{% endblock %}

{% block content %}
  <div class="page-container">
    <h1 class="page-title">대시보드</h1>
    <p class="page-description">건강 지표와 변화 추이를 모니터링하세요.</p>

    <section class="latest-metrics-section">
      <div class="card latest-metrics-card">
        <div class="latest-metrics-header">
          <h2 class="latest-metrics-header-title">최근 혈당 수치</h2>
          <p class="latest-metrics-header-date">측정일: 2025-10-31</p>
        </div>

        <div class="latest-metrics-content">
          <div class="latest-metrics-description">
            <div class="latest-metrics-description-value-container">
              <span class="latest-metrics-description-value">100</span>
              <span class="latest-metrics-description-unit">mg/dL</span>
              <span class="latest-metrics-description-status latest-metrics-description-status-{{ blood_sugar_status }}"
                >{{ blood_sugar_status_label }}</span
              >
            </div>
          </div>
        </div>
      </div>

      <div class="card latest-metrics-card">
        <div class="latest-metrics-header">
          <h2 class="latest-metrics-header-title">최근 혈압 수치</h2>
          <p class="latest-metrics-header-date">측정일: 2025-10-31</p>
        </div>

        <div class="latest-metrics-content">
          <div class="latest-metrics-description">
            <div class="latest-metrics-description-value-container">
              <span class="latest-metrics-description-value">100</span>
              <span class="latest-metrics-description-unit">mmHg</span>
              <span
                class="latest-metrics-description-status latest-metrics-description-status-{{ blood_pressure_status }}"
                >{{ blood_pressure_status_label }}</span
              >
            </div>

            <span class="latest-metrics-description-heart_rate">맥박: 60 bpm</span>
          </div>
        </div>
      </div>
    </section>

    <div class="sections-container">
      <section class="quick-actions-section">
        <div class="card action-and-insights-card">
          <h2 class="card-title">빠른 액션</h2>
          <div class="quick-action-buttons-container">
            <button class="quick-action-button">
              <div class="quick-action-button-name-container">
                <i data-lucide="droplet"></i>
                <span>혈당 데이터 추가</span>
              </div>
              <i data-lucide="plus"></i>
            </button>
            <button class="quick-action-button">
              <div class="quick-action-button-name-container">
                <i data-lucide="heart-pulse"></i>
                <span>혈압 데이터 추가</span>
              </div>
              <i data-lucide="plus"></i>
            </button>
          </div>
        </div>
      </section>

      <section class="health-insights-section">
        <div class="card action-and-insights-card">
          <h2 class="card-title">건강 인사이트</h2>
          <p class="health-insights-description">
            최근 측정값을 바탕으로 볼 때, 귀하의 건강 지표는 정상 범위 내에 있는 것으로 보입니다. 지속적인 모니터링은
            추세와 잠재적인 문제를 조기에 파악하는 데 도움을 줍니다.
          </p>
          <button class="health-insights-button">
            <span>자세히 보기</span>
            <i data-lucide="move-right"></i>
          </button>
        </div>
      </section>
    </div>
  </div>

  <script>
    (function () {
      const eventListeners = [];
      const quickActionButtons = document.querySelectorAll('.quick-action-button');
      const healthInsightsButton = document.querySelector('.health-insights-button');

      function handleQuickActionClick(event) {
        const button = event.currentTarget;

        alert('준비중입니다.');
      }

      [...quickActionButtons, healthInsightsButton].forEach((button) => {
        button.addEventListener('click', handleQuickActionClick);
        eventListeners.push({
          element: button,
          handler: handleQuickActionClick,
          event: 'click',
        });
      });

      // 페이지 언로드 시 모든 이벤트 리스너 제거
      window.addEventListener('beforeunload', () => {
        eventListeners.forEach(({ element, handler, event }) => {
          element.removeEventListener(event, handler);
        });
        eventListeners.length = 0;
      });
    })();
  </script>
{% endblock %}
